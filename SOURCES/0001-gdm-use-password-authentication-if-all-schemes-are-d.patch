From 345ddfb8456eb3fe8e32ab55d4d3a746d15ae4e0 Mon Sep 17 00:00:00 2001
From: Ray Strode <rstrode@redhat.com>
Date: Wed, 1 Jul 2015 11:18:44 -0400
Subject: [PATCH] gdm: use password authentication if all schemes are disabled

This prevents a traceback, at least.
---
 js/gdm/util.js | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/js/gdm/util.js b/js/gdm/util.js
index b594da4fd..bae46bfe0 100644
--- a/js/gdm/util.js
+++ b/js/gdm/util.js
@@ -419,6 +419,11 @@ var ShellUserVerifier = new Lang.Class({
             this._defaultService = SMARTCARD_SERVICE_NAME;
         else if (this._haveFingerprintReader)
             this._defaultService = FINGERPRINT_SERVICE_NAME;
+
+        if (!this._defaultService) {
+            log("no authentication service is enabled, using password authentication");
+            this._defaultService = PASSWORD_SERVICE_NAME;
+        }
     },
 
     _startService: function(serviceName) {
-- 
2.14.2

