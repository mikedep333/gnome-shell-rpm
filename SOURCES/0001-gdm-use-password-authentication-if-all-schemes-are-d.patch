From 2af504d2aac532fa7e7e3a628198b337440e3d34 Mon Sep 17 00:00:00 2001
From: Ray Strode <rstrode@redhat.com>
Date: Wed, 1 Jul 2015 11:18:44 -0400
Subject: [PATCH] gdm: use password authentication if all schemes are disabled

This prevents a traceback, at least.
---
 js/gdm/util.js | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/js/gdm/util.js b/js/gdm/util.js
index 2ff59cb75..1aa52a17f 100644
--- a/js/gdm/util.js
+++ b/js/gdm/util.js
@@ -414,6 +414,11 @@ const ShellUserVerifier = new Lang.Class({
             this._defaultService = SMARTCARD_SERVICE_NAME;
         else if (this._haveFingerprintReader)
             this._defaultService = FINGERPRINT_SERVICE_NAME;
+
+        if (!this._defaultService) {
+            log("no authentication service is enabled, using password authentication");
+            this._defaultService = PASSWORD_SERVICE_NAME;
+        }
     },
 
     _startService: function(serviceName) {
-- 
2.12.0

